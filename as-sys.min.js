!function(){var extractProps=function(t){for(var e,n,o={},r=t,i=arguments.length;r<i;++r)if(e=arguments[r],"object"==typeof e&&null!==e){n=Object.keys(e);for(var a=0,s=n.length;a<s;++a)o[n[a]]=!0}return o},copyEnabled=function(t){return null!=t&&"object"==typeof t&&"function"==typeof t.constructor&&!t.nodeType},mergeObjects=function(t,e,n,o){if(!t&&!e&&"function"==typeof Object.assign){for(;null==o[n];++n);return Object.assign.apply(Object,0==n?o:Array.prototype.slice.call(o,n))}for(var r=o[n],i=o.length,a=function(n,o){if(null!=o){if(null==n)return void(n=o);for(var r in o)if(n[r]!==o[r]&&(void 0===n[r]||!e))if(!t||"object"!=typeof o[r]||o[r]instanceof RegExp||!o.hasOwnProperty(r)||!copyEnabled(o[r]))n[r]=o[r];else try{null==n[r]&&(n[r]=asSys.mimic(o[r])),a(n[r],o[r])}catch(t){n[r]=o[r]}}};++n<i;)a(r,o[n]);return r},twinScan=function(t,e,n){for(var o,r,i=e,a=t.length;i<a;++i)for(o=t[i],r=i+1;r<a;++r)if(n(o,t[r])===!1)return!1;return!0},asSys=function(){for(var t,e,n=[],o=null,r=Array.prototype.slice.call(arguments,0),i=function(){var t=this,e=arguments;t.__initializing||(t.__initializing=!0,asSys.each(t.__skills,function(n){n.apply(t,e)}),delete t.__initializing)},a=0;a<r.length;++a){if(e=r[a],null==e)throw{name:"Missing skill",message:"The skill-set liseted ["+e+"] is missing.",skill:s};if("function"==typeof e&&void 0!==e.prototype){if(n.indexOf(e)>-1)continue;if(null!=e.prototype.__depends){t=[a,0];for(var s,l=0,f=e.prototype.__depends.length;l<f;++l)s=e.prototype.__depends[l],r.indexOf(s)==-1&&t.push(s);if(t.length>2){Array.prototype.splice.apply(r,t),--a;continue}}if(null!=e.prototype.__expects){null==o&&(o={});for(var l=0,f=e.prototype.__expects.length;l<f;++l)o[e.prototype.__expects[l]]=!0}if(n.push(e),void 0===i.prototype?i.prototype=Object.create(e.prototype):mergeObjects(!0,!1,0,[i.prototype,e.prototype]),void 0!==e.prototype.__skills)for(var p,l=0,c=e.prototype.__skills.length;l<c;++l)p=e.prototype.__skills[l],n.indexOf(p)==-1&&n.push(p)}}return asSys.each(o,function(t,e){if(null==i.prototype[e])throw{name:"Unmatched expectation",message:"The expected method ["+e+"] was not found among provided skills.",method:e}}),Object.defineProperties(i.prototype,{__skills:{enumerable:!1,writable:!1,value:n}}),i};asSys.version="0.10.4",asSys.equal=function(t){var e=t,n=0,o=function(t,n,r){if("object"!=typeof t||"object"!=typeof n)return t===n;if(r!==!1){for(var i in extractProps(0,t,n))if(!o(t[i],n[i],e))return!1;return!0}};return"boolean"!=typeof e?e=!1:n=1,twinScan(arguments,n,o)},asSys.similar=function(t){var e=t,n=0;return match=function(t,n,o){if(t instanceof RegExp)return"string"==typeof n&&null!=n.match(t);if(n instanceof RegExp)return"string"==typeof t&&null!=t.match(n);if("object"!=typeof t||"object"!=typeof n)return t==n;if(o!==!1){for(var r in t)if(void 0!==n[r]&&!match(t[r],n[r],e))return!1;return!0}},"boolean"!=typeof e?e=!1:n=1,twinScan(arguments,n,match)},asSys.common=function(t){var e=t,n=0,o=null,r=arguments.length,i=function(t,n){if(Array.isArray(t)&&Array.isArray(n)){null==o&&(o=[]);for(var r=0,i=t.length;r<i;++r)n.indexOf(t[r])>-1&&o.push(t[r])}else{null==o&&(o={});for(var a in t)!n.hasOwnProperty(a)||e&&t[a]!=n[a]||(o[a]=t[a])}};for("boolean"!=typeof t?e=!1:n=1;++n<r;)i(null==o?arguments[n-1]:o,arguments[n]);return o},asSys.extend=function(t){var e=t,n=0;return"boolean"!=typeof e?e=!1:n=1,mergeObjects(e,!1,n,arguments)},asSys.mixin=function(t){var e=t,n=0;return"boolean"!=typeof e?e=!1:n=1,mergeObjects(e,!0,n,arguments)},asSys.filter=function(t,e){if("function"==typeof t.filter)return t.filter(e);for(var n,o=asSys.mimic(t),r=Object.keys(t),i=0,a=r.length;i<a;++i)n=r[i],e(t[n],n,t)&&(o[n]=t[n]);return o},asSys.each=function(t,e){if(null==t);else if("function"==typeof t.forEach)t.forEach(e);else if("object"!=typeof t)e(t);else for(var n,o=Object.keys(t),r=0,i=o.length;r<i;++r)n=o[r],e(t[n],n,t)},asSys.weight=function(t){return"object"!=typeof t?1:t.hasOwnProperty("length")&&"number"==typeof t.length?t.length:Object.keys(t).length},asSys.name=function(t){if("function"!=typeof t)return skill.toString();if(void 0!==t.name)return t.name;var e=t.toString().match(/function ([^\(]+)/);return null!=e?e[1]:""},asSys.mimic=function(t){if(copyEnabled(t)){var e=Object.create(Object.getPrototypeOf(t));try{return t.constructor.apply(e,Array.prototype.slice(arguments,1))||e}catch(t){}}},asSys.path=function(agent,path,value){if(null!=path){if(!Array.isArray(path))try{return void 0===value?eval("value = agent."+path):eval("agent."+path+" = value"),value}catch(t){path=path.split(".")}for(var i=0,pl=path.length;i<pl-1;++i)agent=agent[path[i]]=agent[path[i]]||{};return void 0!==value?agent[path[i]]=value:value=agent[path[i]],value}},asSys.act=function(t,e){if(null!=t&&"function"==typeof e)return e.apply(t,Array.prototype.slice.call(arguments,2))},asSys.broadcast=function(t,e){var n=Array.prototype.slice.call(arguments,2);return asSys.each(t.__skills,function(o){"function"==typeof o.prototype[e]&&o.prototype[e].apply(t,n)}),t},asSys.pass=function(t,e,n){var o,r=t.__skills&&t.__skills.indexOf(e);if(r>-1)for(;--r>=0;)if(o=t.__skills[r],"function"==typeof o.prototype[n])return o.prototype[n].apply(t,Array.prototype.slice.call(arguments,3))},asSys.can=function(t,e){return"object"==typeof t&&null!=t[e]&&"function"==typeof t[e]},asSys.aware=function(t,e){return"object"==typeof t&&void 0!==t[e]},asSys.capable=function(t,e){var n,o,r=e,i=Object.getPrototypeOf(t),a=1;"boolean"!=typeof r?r=!0:a=2;for(var s=0,l=a,f=arguments.length;a<f;++a)n=arguments[a],t instanceof n?++s:(o=asSys.weight(n.prototype),o>0&&asSys.weight(asSys.common(!0,i,n.prototype))==o&&++s);return s>0&&(!r||arguments.length-l==s)},asSys.group=function(t,e,n){"boolean"!=typeof e&&(n=e,e=!1);var o,r=this.mimic(t),i={};for(var a in t){var o=t[a];n.call(o,o,a,t)&&(e&&mergeObjects(!1,!1,0,[i,Object.getPrototypeOf(o)]),r.push(o))}if(e){for(var s,l=Object.keys(i),f={},p=0,c=l.length;p<c;++p)s=l[p],f[s]={enumerable:!1,writable:!1,value:"function"!=typeof i[s]?i[s]:function(t){return function(){var e=void 0;for(var n in this){var o=this[n];"function"==typeof o[t]&&(e=o[t].apply(o,arguments))}return e}}(s)};Object.defineProperties(r,f)}return r},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=asSys:"function"==typeof define&&define.amd?(define(asSys),this.asSys=asSys):this.asSys=this.a$=asSys}();
