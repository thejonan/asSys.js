!function(){var extractProps=function(t){for(var e,n,r={},o=t,i=arguments.length;o<i;++o){e=arguments[o],n=Object.keys(e);for(var a=0,f=n.length;a<f;++a)r[n[a]]=!0}return r},copyEnabled=function(t){return null!=t&&"object"==typeof t&&"function"==typeof t.constructor&&!t.nodeType},mergeObjects=function(t,e,n,r){if(!t&&!e&&"function"==typeof Object.assign){for(;null==r[n];++n);return Object.assign.apply(Object,0==n?r:Array.prototype.slice.call(r,n))}for(var o=r[n],i=r.length,a=function(n,r){if(null!=r){if(null==n)return void(n=r);for(var o in r)if(n[o]!==r[o]&&(void 0===n[o]||!e))if(t&&"object"==typeof r[o]&&r.hasOwnProperty(o)&&copyEnabled(r[o]))try{null==n[o]&&(n[o]=asSys.mimic(r[o])),a(n[o],r[o])}catch(t){n[o]=r[o]}else n[o]=r[o]}};++n<i;)a(o,r[n]);return o},twinScan=function(t,e,n){for(var r,o,i=e,a=t.length;i<a;++i)for(r=t[i],o=i+1;o<a;++o)if(n(r,t[o])===!1)return!1;return!0},asSys=function(){for(var t,e,n=[],r=Array.prototype.slice.call(arguments,0),o=function(){var t=this,e=arguments;t.__initializing||(t.__initializing=!0,asSys.each(t.__skills,function(n){n.apply(t,e)}),delete t.__initializing)},i=0;i<r.length;++i)if(e=r[i],"function"==typeof e&&void 0!==e.prototype){if(n.indexOf(e)>-1)continue;if(null!=e.prototype.__expects){t=[i,0];for(var a,f=0,s=e.prototype.__expects.length;f<s;++f)a=e.prototype.__expects[f],r.indexOf(a)==-1&&t.push(a);if(t.length>2){Array.prototype.splice.apply(r,t),--i;continue}}if(n.push(e),void 0===o.prototype?o.prototype=Object.create(e.prototype):mergeObjects(!0,!1,0,[o.prototype,e.prototype]),void 0!==e.prototype.__skills)for(var l,f=0,p=e.prototype.__skills.length;f<p;++f)l=e.prototype.__skills[f],n.indexOf(l)==-1&&n.push(l)}return Object.defineProperties(o.prototype,{__skills:{enumerable:!1,writable:!1,value:n}}),o};asSys.version="0.9.0",asSys.equal=function(t){var e=t,n=0,r=function(t,n,o){if("object"!=typeof t||"object"!=typeof n)return t===n;if(o!==!1){for(var i in extractProps(0,t,n))if(!r(t[i],n[i],e))return!1;return!0}};return"boolean"!=typeof e?e=!1:n=1,twinScan(arguments,n,r)},asSys.similar=function(t){var e=t,n=0;return match=function(t,n,r){if(t instanceof RegExp)return"string"==typeof n&&null!=n.match(t);if(n instanceof RegExp)return"string"==typeof t&&null!=t.match(n);if("object"!=typeof t||"object"!=typeof n)return t==n;if(r!==!1){for(var o in t)if(void 0!==n[o]&&!match(t[o],n[o],e))return!1;return!0}},"boolean"!=typeof e?e=!1:n=1,twinScan(arguments,n,match)},asSys.common=function(t){var e=t,n=0,r=null,o=arguments.length,i=function(t,n){if(Array.isArray(t)&&Array.isArray(n)){null==r&&(r=[]);for(var o=0,i=t.length;o<i;++o)n.indexOf(t[o])>-1&&r.push(t[o])}else{null==r&&(r={});for(var a in t)!n.hasOwnProperty(a)||e&&t[a]!=n[a]||(r[a]=t[a])}};for("boolean"!=typeof t?e=!1:n=1;++n<o;)i(null==r?arguments[n-1]:r,arguments[n]);return r},asSys.extend=function(t){var e=t,n=0;return"boolean"!=typeof e?e=!1:n=1,mergeObjects(e,!1,n,arguments)},asSys.mixin=function(t){var e=t,n=0;return"boolean"!=typeof e?e=!1:n=1,mergeObjects(e,!0,n,arguments)},asSys.filter=function(t,e){if("function"==typeof t.filter)return t.filter(e);for(var n,r=asSys.mimic(t),o=Object.keys(t),i=0,a=o.length;i<a;++i)n=o[i],e(t[n],n,t)&&(r[n]=t[n]);return r},asSys.each=function(t,e){if(null==t);else if("function"==typeof t.forEach)t.forEach(e);else if("object"!=typeof t)e(t);else for(var n,r=Object.keys(t),o=0,i=r.length;o<i;++o)n=r[o],e(t[n],n,t)},asSys.weight=function(t){return"object"!=typeof t?1:t.hasOwnProperty("length")&&"number"==typeof t.length?t.length:Object.keys(t).length},asSys.name=function(t){if("function"!=typeof t)return skill.toString();if(void 0!==t.name)return t.name;var e=t.toString().match(/function ([^\(]+)/);return null!=e?e[1]:""},asSys.mimic=function(t){if(copyEnabled(t)){var e=Object.create(Object.getPrototypeOf(t));try{return t.constructor.apply(e,Array.prototype.slice(arguments,1))||e}catch(t){}}},asSys.path=function(agent,path,value){if(null!=path){if(!Array.isArray(path))try{return void 0===value?eval("value = agent."+path):eval("agent."+path+" = value"),value}catch(t){path=path.split(".")}for(var i=0,pl=path.length;i<pl-1;++i)agent=agent[path[i]]=agent[path[i]]||{};return void 0!==value?agent[path[i]]=value:value=agent[path[i]],value}},asSys.act=function(t,e){if(null!=t&&"function"==typeof e)return e.apply(t,Array.prototype.slice.call(arguments,2))},asSys.broadcast=function(t,e){var n=Array.prototype.slice.call(arguments,2);return asSys.each(t.__skills,function(r){"function"==typeof r.prototype[e]&&r.prototype[e].apply(t,n)}),t},asSys.pass=function(t,e,n){var r,o=t.__skills&&t.__skills.indexOf(e);if(o>-1)for(;--o>=0;)if(r=t.__skills[o],"function"==typeof r.prototype[n])return r.prototype[n].apply(t,Array.prototype.slice.call(arguments,3))},asSys.can=function(t,e){return"object"==typeof t&&null!=t[e]&&"function"==typeof t[e]},asSys.aware=function(t,e){return"object"==typeof t&&void 0!==t[e]},asSys.capable=function(t,e){var n,r,o=e,i=Object.getPrototypeOf(t),a=1;"boolean"!=typeof o?o=!0:a=2;for(var f=0,s=a,l=arguments.length;a<l;++a)n=arguments[a],t instanceof n?++f:(r=asSys.weight(n.prototype),r>0&&asSys.weight(asSys.common(!0,i,n.prototype))==r&&++f);return f>0&&(!o||arguments.length-s==f)},asSys.group=function(t,e,n){"boolean"!=typeof e&&(n=e,e=!1);var r,o=this.mimic(t),i={};for(var a in t){var r=t[a];n.call(r,r,a,t)&&(e&&mergeObjects(!1,!1,0,[i,Object.getPrototypeOf(r)]),o.push(r))}if(e){for(var f,s=Object.keys(i),l={},p=0,c=s.length;p<c;++p)f=s[p],l[f]={enumerable:!1,writable:!1,value:"function"!=typeof i[f]?i[f]:function(t){return function(){var e=void 0;for(var n in this){var r=this[n];"function"==typeof r[t]&&(e=r[t].apply(r,arguments))}return e}}(f)};Object.defineProperties(o,l)}return o},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=asSys:"function"==typeof define&&define.amd?(define(asSys),this.asSys=asSys):this.asSys=this.a$=asSys}();
