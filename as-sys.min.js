!function(){var t=function(t){for(var e,n,o={},r=t,i=arguments.length;r<i;++r){e=arguments[r],n=Object.keys(e);for(var f=0,l=n.length;f<l;++f)o[n[f]]=!0}return o},e=function(t){return null!=t&&"object"==typeof t&&"function"==typeof t.constructor&&!t.nodeType},n=function(t,n,o,i){if(!t&&!n&&"function"==typeof Object.assign){for(;null==i[o];++o);return Object.assign.apply(Object,0==o?i:Array.prototype.slice.call(i,o))}for(var f=i[o],l=i.length,p=function(o,i){if(null!=i){if(null==o)return void(o=i);for(var f in i)if(o[f]!==i[f]&&(void 0===o[f]||!n))if(t&&"object"==typeof i[f]&&i.hasOwnProperty(f)&&e(i[f]))try{null==o[f]&&(o[f]=r.mimic(i[f])),p(o[f],i[f])}catch(t){o[f]=i[f]}else o[f]=i[f]}};++o<l;)p(f,i[o]);return f},o=function(t,e,n){for(var o,r,i=e,f=t.length;i<f;++i)for(o=t[i],r=i+1;r<f;++r)if(n(o,t[r])===!1)return!1;return!0},r=function(){for(var t,e,o=[],i=Array.prototype.slice.call(arguments,0),f=function(){var t=this,e=arguments;t.__initializing||(t.__initializing=!0,r.each(t.__skills,function(n){n.apply(t,e)}),delete t.__initializing)},l=0;l<i.length;++l)if(e=i[l],"function"==typeof e&&void 0!==e.prototype){if(o.indexOf(e)>-1)continue;if(null!=e.prototype.__expects){t=[l,0];for(var p,c=0,u=e.prototype.__expects.length;c<u;++c)p=e.prototype.__expects[c],i.indexOf(p)==-1&&t.push(p);if(t.length>2){Array.prototype.splice.apply(i,t),--l;continue}}if(o.push(e),void 0===f.prototype?f.prototype=Object.create(e.prototype):n(!0,!1,0,[f.prototype,e.prototype]),void 0!==e.prototype.__skills)for(var a,c=0,y=e.prototype.__skills.length;c<y;++c)a=e.prototype.__skills[c],o.indexOf(a)==-1&&o.push(a)}return Object.defineProperties(f.prototype,{__skills:{enumerable:!1,writable:!1,value:o}}),f};r.version="0.9.0",r.equal=function(e){var n=e,r=0,i=function(e,o,r){if("object"!=typeof e||"object"!=typeof o)return e===o;if(r!==!1){for(var f in t(0,e,o))if(!i(e[f],o[f],n))return!1;return!0}};return"boolean"!=typeof n?n=!1:r=1,o(arguments,r,i)},r.similar=function(t){var e=t,n=0;return match=function(t,n,o){if(t instanceof RegExp)return"string"==typeof n&&null!=n.match(t);if(n instanceof RegExp)return"string"==typeof t&&null!=t.match(n);if("object"!=typeof t||"object"!=typeof n)return t==n;if(o!==!1){for(var r in t)if(void 0!==n[r]&&!match(t[r],n[r],e))return!1;return!0}},"boolean"!=typeof e?e=!1:n=1,o(arguments,n,match)},r.common=function(t){var e=t,n=0,o=null,r=arguments.length,i=function(t,n){if(Array.isArray(t)&&Array.isArray(n)){null==o&&(o=[]);for(var r=0,i=t.length;r<i;++r)n.indexOf(t[r])>-1&&o.push(t[r])}else{null==o&&(o={});for(var f in t)!n.hasOwnProperty(f)||e&&t[f]!=n[f]||(o[f]=t[f])}};for("boolean"!=typeof t?e=!1:n=1;++n<r;)i(null==o?arguments[n-1]:o,arguments[n]);return o},r.extend=function(t){var e=t,o=0;return"boolean"!=typeof e?e=!1:o=1,n(e,!1,o,arguments)},r.mixin=function(t){var e=t,o=0;return"boolean"!=typeof e?e=!1:o=1,n(e,!0,o,arguments)},r.filter=function(t,e){if("function"==typeof t.filter)return t.filter(e);for(var n,o=r.mimic(t),i=Object.keys(t),f=0,l=i.length;f<l;++f)n=i[f],e(t[n],n,t)&&(o[n]=t[n]);return o},r.each=function(t,e){if(null==t);else if("function"==typeof t.forEach)t.forEach(e);else for(var n,o=Object.keys(t),r=0,i=o.length;r<i;++r)n=o[r],e(t[n],n,t)},r.weight=function(t){return"object"!=typeof t?1:t.hasOwnProperty("length")&&"number"==typeof t.length?t.length:Object.keys(t).length},r.name=function(t){if("function"!=typeof t)return skill.toString();if(void 0!==t.name)return t.name;var e=t.toString().match(/function ([^\(]+)/);return null!=e?e[1]:""},r.mimic=function(t){if(e(t)){var n=Object.create(Object.getPrototypeOf(t));try{return t.constructor.apply(n,Array.prototype.slice(arguments,1))||n}catch(t){}}},r.act=function(t,e){if(null!=t&&"function"==typeof e)return e.apply(t,Array.prototype.slice.call(arguments,2))},r.broadcast=function(t,e){var n=Array.prototype.slice.call(arguments,2);return r.each(t.__skills,function(o){"function"==typeof o.prototype[e]&&o.prototype[e].apply(t,n)}),t},r.pass=function(t,e,n){var o,r=t.__skills&&t.__skills.indexOf(e);if(r>-1)for(;--r>=0;)if(o=t.__skills[r],"function"==typeof o.prototype[n])return o.prototype[n].apply(t,Array.prototype.slice.call(arguments,3))},r.can=function(t,e){return"object"==typeof t&&null!=t[e]&&"function"==typeof t[e]},r.aware=function(t,e){return"object"==typeof t&&void 0!==t[e]},r.capable=function(t,e){var n,o,i=e,f=Object.getPrototypeOf(t),l=1;"boolean"!=typeof i?i=!0:l=2;for(var p=0,c=l,u=arguments.length;l<u;++l)n=arguments[l],t instanceof n?++p:(o=r.weight(n.prototype),o>0&&r.weight(r.common(!0,f,n.prototype))==o&&++p);return p>0&&(!i||arguments.length-c==p)},r.group=function(t,e,o){"boolean"!=typeof e&&(o=e,e=!1);var r,i=this.mimic(t),f={};for(var l in t){var r=t[l];o.call(r,r,l,t)&&(e&&n(!1,!1,0,[f,Object.getPrototypeOf(r)]),i.push(r))}if(e){for(var p,c=Object.keys(f),u={},a=0,y=c.length;a<y;++a)p=c[a],u[p]={enumerable:!1,writable:!1,value:"function"!=typeof f[p]?f[p]:function(t){return function(){var e=void 0;for(var n in this){var o=this[n];"function"==typeof o[t]&&(e=o[t].apply(o,arguments))}return e}}(p)};Object.defineProperties(i,u)}return i},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?(define(r),this.asSys=r):this.asSys=this.a$=r}();
