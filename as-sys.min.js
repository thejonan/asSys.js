!function(){var t=function(t){for(var e,n,r={},o=t,i=arguments.length;o<i;++o){e=arguments[o],n=Object.keys(e);for(var f=0,c=n.length;f<c;++f)r[n[f]]=!0}return r},e=function(t,e,n,o){if(!t&&!e&&"function"==typeof Object.assign){for(;null==o[n];++n);return Object.assign.apply(Object,0==n?o:Array.prototype.slice.call(o,n))}for(var i=o[n],f=o.length,c=function(n,o){if(null!=o){if(null==n)return void(n=o);for(var i in o)n[i]!==o[i]&&null!=o[i]&&(n.hasOwnProperty(i)&&e||(t&&"object"==typeof o[i]?(n.hasOwnProperty(i)||(n[i]=r.mimic(o[i])),c(n[i],o[i])):n[i]=o[i]))}};++n<f;)c(i,o[n]);return i},n=function(t,e,n){for(var r,o,i=e,f=t.length;i<f;++i)for(r=t[i],o=i+1;o<f;++o)if(n(r,t[o])===!1)return!1;return!0},r=function(){for(var t,n,o=[],i=Array.prototype.slice.call(arguments,0),f=function(){var t=this,e=arguments;r.each(t.__skills,function(n){n.apply(t,e)})},c=0;c<i.length;++c)if(n=i[c],"function"==typeof n&&void 0!==n.prototype){if(o.indexOf(n)>-1)continue;if(null!=n.prototype.__expects){t=[c,0];for(var u,p=0,a=n.prototype.__expects.length;p<a;++p)u=n.prototype.__expects[p],i.indexOf(u)==-1&&t.push(u);if(t.length>2){Array.prototype.splice.apply(i,t),--c;continue}}o.push(n),void 0===f.prototype?f.prototype=Object.create(n.prototype):e(!0,!1,0,[f.prototype,n.prototype])}return Object.defineProperties(f.prototype,{__skills:{enumerable:!1,writable:!1,value:o}}),f};r.version="0.9.0",r.equal=function(e){var r=e,o=0,i=function(e,n,o){if("object"!=typeof e||"object"!=typeof n)return e===n;if(o!==!1){for(var f in t(0,e,n))if(!i(e[f],n[f],r))return!1;return!0}};return"boolean"!=typeof r?r=!1:o=1,n(arguments,o,i)},r.similar=function(t){var e=t,r=0;return match=function(t,n,r){if(t instanceof RegExp)return"string"==typeof n&&null!=n.match(t);if(n instanceof RegExp)return"string"==typeof t&&null!=t.match(n);if("object"!=typeof t||"object"!=typeof n)return t==n;if(r!==!1){for(var o in t)if(void 0!==n[o]&&!match(t[o],n[o],e))return!1;return!0}},"boolean"!=typeof e?e=!1:r=1,n(arguments,r,match)},r.common=function(t){var e=t,n=0,o=null,i=arguments.length,f=function(t,n){if(null==o&&(o=r.mimic(t)),Array.isArray(t)&&Array.isArray(n))for(var i=0,f=t.length;i<f;++i)n.indexOf(t[i])>-1&&o.push(t[i]);else for(var c in t)!n.hasOwnProperty(c)||e&&t[c]!=n[c]||(o[c]=t[c])};for("boolean"!=typeof t?e=!1:n=1;++n<i;)f(null==o?arguments[n-1]:o,arguments[n]);return o},r.extend=function(t){var n=t,r=0;return"boolean"!=typeof n?n=!1:r=1,e(n,!1,r,arguments)},r.mixin=function(t){var n=t,r=0;return"boolean"!=typeof n?n=!1:r=1,e(n,!0,r,arguments)},r.filter=function(t,e){if("function"==typeof t.filter)return t.filter(e);for(var n,o=r.mimic(t),i=Object.keys(t),f=0,c=i.length;f<c;++f)n=i[f],e(t[n],n,t)&&(o[n]=t[n]);return o},r.each=function(t,e){if(null==t);else if("function"==typeof t.forEach)t.forEach(e);else for(var n,r=Object.keys(t),o=0,i=r.length;o<i;++o)n=r[o],e(t[n],n,t)},r.weight=function(t){return"object"!=typeof t?1:t.hasOwnProperty("length")&&"number"==typeof t.length?t.length:Object.keys(t).length},r.name=function(t){if("function"!=typeof t)return skill.toString();if(void 0!==t.name)return t.name;var e=t.toString().match(/function ([^\(]+)/);return null!=e?e[1]:""},r.mimic=function(t){var e=Object.create(Object.getPrototypeOf(t));return t.constructor.apply(e,Array.prototype.slice(arguments,1))||e},r.act=function(t,e){if(null!=t&&"function"==typeof e)return e.apply(t,Array.prototype.slice.call(arguments,2))},r.broadcast=function(t,e){var n=Array.prototype.slice.call(arguments,2);return r.each(t.__skills,function(r){"function"==typeof r.prototype[e]&&r.prototype[e].apply(t,n)}),t},r.can=function(t,e){return"object"==typeof t&&null!=t[e]&&"function"==typeof t[e]},r.aware=function(t,e){return"object"==typeof t&&void 0!==t[e]},r.capable=function(t,e){var n,o,i=e,f=Object.getPrototypeOf(t),c=1;"boolean"!=typeof i?i=!0:c=2;for(var u=0,p=c,a=arguments.length;c<a;++c)n=arguments[c],t instanceof n?++u:(o=r.weight(n.prototype),o>0&&r.weight(r.common(!0,f,n.prototype))==o&&++u);return u>0&&(!i||arguments.length-p==u)},r.group=function(t,n,r){"boolean"!=typeof n&&(r=n,n=!1);var o,i=this.mimic(t),f={};for(var c in t){var o=t[c];r.call(o,o,c,t)&&(n&&e(!1,!1,0,[f,Object.getPrototypeOf(o)]),i.push(o))}if(n){for(var u,p=Object.keys(f),a={},l=0,y=p.length;l<y;++l)u=p[l],a[u]={enumerable:!1,writable:!1,value:"function"!=typeof f[u]?f[u]:function(t){return function(){var e=void 0;for(var n in this){var r=this[n];"function"==typeof r[t]&&(e=r[t].apply(r,arguments))}return e}}(u)};Object.defineProperties(i,a)}return i},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:(this.asSys=this.a$=r,"function"==typeof define&&define.amd&&define(r))}();
